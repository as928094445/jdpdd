(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/productList"],{2712:function(t,e,n){"use strict";var r=n("93ab"),o=n.n(r);o.a},"62a3":function(t,e,n){"use strict";(function(t){n("908c");r(n("66fd"));var e=r(n("efe5"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},"7b1a":function(t,e,n){"use strict";var r;n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return r}));var o=function(){var t=this,e=t.$createElement,n=(t._self._c,t.px(t.dropScreenH+18));t.$mp.data=Object.assign({},{$root:{m0:n}})},i=[]},"93ab":function(t,e,n){},c3f8:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n("2f62"),o=i(n("8846"));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=s(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(t,e){if(t){if("string"===typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h=function(){n.e("components/icon/icon").then(function(){return resolve(n("11d2"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/drawer/drawer").then(function(){return resolve(n("55a7"))}.bind(null,n)).catch(n.oe)},p=function(){n.e("components/loadmore/loadmore").then(function(){return resolve(n("1d98"))}.bind(null,n)).catch(n.oe)},g=function(){n.e("components/nomore/nomore").then(function(){return resolve(n("19b2"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/extend/tips/tips").then(function(){return resolve(n("fce4"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/top-dropdown/top-dropdown").then(function(){return resolve(n("7deb"))}.bind(null,n)).catch(n.oe)},w=function(){n.e("components/tag/tag").then(function(){return resolve(n("382c"))}.bind(null,n)).catch(n.oe)},b=function(){n.e("components/formid/fromid").then(function(){return resolve(n("3128"))}.bind(null,n)).catch(n.oe)},y={computed:d({},(0,r.mapState)(["isLogin","userInfo","pid","allianceName"])),components:{tuiIcon:h,tuiDrawer:f,tuiLoadmore:p,tuiNomore:g,tuiTopDropdown:v,tuiTag:w,tuiTips:m,fromId:b},data:function(){return{searchKey:"",width:200,height:64,inputTop:0,arrowTop:0,dropScreenH:0,attrData:[],attrIndex:-1,dropScreenShow:!1,scrollTop:0,tabIndex:0,isList:!1,drawer:!1,drawerH:0,selectedName:"综合",selectH:0,sortType:0,withCoupon:!0,isBrand:!1,opt_id:"",dropdownList:[{name:"综合",selected:!0,num:"0"},{name:"价格升序",selectedName:"价格升序",selected:!1,num:"3"},{name:"价格降序",selectedName:"价格降序",selected:!1,num:"4"},{name:"按佣金金额升序排序",selectedName:"佣金升序",selected:!1,num:"13"},{name:"按佣金金额降序排序",selectedName:"佣金降序",selected:!1,num:"14"}],categoryArr:[{id:8569,name:"精选",selected:!1}],attrArr:[{name:"新品",selectedName:"新品",isActive:!1,list:[]},{name:"品牌",selectedName:"品牌",isActive:!1,list:[{name:"trendsetter",selected:!1},{name:"维肯（Viken）",selected:!1}]},{name:"类型",selectedName:"类型",isActive:!1,list:[{name:"线充套装",selected:!1},{name:"单条装",selected:!1}]},{name:"适用手机",selectedName:"适用手机",isActive:!1,list:[{name:"通用",selected:!1},{name:"vivo",selected:!1}]}],productList:[],pageIndex:1,loadding:!1,pullUpOn:!0}},onLoad:function(e){var n=this,r={};r=wx.getMenuButtonBoundingClientRect(),t.getSystemInfo({success:function(o){n.width=r.left||o.windowWidth,n.height=r.top?r.top+r.height+8:o.statusBarHeight+44,n.inputTop=r.top?r.top+(r.height-30)/2:o.statusBarHeight+7,n.arrowTop=r.top?r.top+(r.height-32)/2:o.statusBarHeight+6,n.searchKey=e.searchKey||"",n.dropScreenH=750*n.height/o.windowWidth+80,n.drawerH=o.windowHeight-t.upx2px(100)-n.height}}),this.getInfo(),this.getSearchList()},methods:{px:function(e){return t.upx2px(e)+"px"},btnDropChange:function(t){var e=this,n=t.currentTarget.dataset.index,r=JSON.parse(JSON.stringify(this.attrArr[n].list));0===r.length?this.$set(this.attrArr[n],"isActive",!this.attrArr[n].isActive):(this.attrData=r,this.attrIndex=n,this.dropScreenShow=!0,this.$set(this.attrArr[n],"isActive",!1),this.scrollTop=1,this.$nextTick((function(){e.scrollTop=0})))},btnSelected:function(t){var e=t.currentTarget.dataset.index;this.$set(this.attrData[e],"selected",!this.attrData[e].selected)},reset:function(){var t,e=this.attrData,n=a(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.selected=!1}}catch(o){n.e(o)}finally{n.f()}this.attrData=e},btnCloseDrop:function(){var t=this;this.scrollTop=1,this.$nextTick((function(){t.scrollTop=0})),this.dropScreenShow=!1,this.attrIndex=-1},btnSure:function(){var t,e=this.attrIndex,n=this.attrData,r=!1,o="",i=a(n);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.selected&&(r=!0,o+=o?";"+s.name:s.name)}}catch(u){i.e(u)}finally{i.f()}var c=this.attrArr[e];this.btnCloseDrop(),this.$set(c,"isActive",r),this.$set(c,"selectedName",o)},showDropdownList:function(){this.selectH=246,this.withCoupon=!1},hideDropdownList:function(){this.selectH=0},dropdownItem:function(t){var e=t.currentTarget.dataset.index;console.log(e);for(var n=this.dropdownList,r=0;r<n.length;r++)n[r].selected=r===e;this.dropdownList=n,this.selectedName=n[e]["selectedName"],this.selectH=0,this.sortType=n[e]["num"],this.pageIndex=1,this.getSearchList()},screen:function(t){var e=t.currentTarget.dataset.index;0==e?this.showDropdownList():1==e?(this.withCoupon=!this.withCoupon,this.pageIndex=1,this.getSearchList()):2==e?this.isList=!this.isList:3==e&&(this.drawer=!0)},setBrand:function(){this.isBrand=!this.isBrand},setOpt:function(t){var e=t.currentTarget.dataset.index,n=this.categoryArr[e].selected;this.opt_id=this.categoryArr[e].opt_id,console.log(this.opt_id),this.resetDrawer("opt"),this.$set(this.categoryArr[e],"selected",!n)},resetDrawer:function(t){"opt"!=t&&(this.isBrand=!1,this.opt_id="");for(var e=0;e<this.categoryArr.length;e++)this.$set(this.categoryArr[e],"selected",!1)},closeDrawer:function(){this.drawer=!1,this.pageIndex=1,this.getSearchList()},back:function(){this.drawer?this.closeDrawer():t.navigateBack()},search:function(){t.navigateTo({url:"./search"})},detail:function(e,n){var r=n>=0?"&goods="+escape(JSON.stringify(this.productList[n])):"";t.navigateTo({url:"./detail?good_id="+e+r})},getSearchList:function(){this.loadding=!0;var e=this;console.log(e.opt_id),o.default.getSearch({keyword:e.searchKey,sortType:e.sortType,withCoupon:e.withCoupon,isBrand:e.isBrand,opt_id:e.opt_id,pages:e.pageIndex},(function(n){var r=n.list,o=n.next;0==o&&(e.pullUpOn=!1),1==e.pageIndex&&(e.productList=[],t.pageScrollTo({scrollTop:0,duration:300})),e.productList=e.productList.concat(r),e.pageIndex=e.pageIndex+1,e.loadding=!1}))},getInfo:function(){var t=this,e=this;e.$http.get("/opt").then((function(t){200==t.data.ret&&(e.categoryArr=t.data.data)})).catch((function(e){t.getInfo()}))}},onPullDownRefresh:function(){this.pageIndex=1,this.getSearchList(),t.stopPullDownRefresh()},onReachBottom:function(){this.pullUpOn&&this.getSearchList()}};e.default=y}).call(this,n("543d")["default"])},d44b:function(t,e,n){"use strict";n.r(e);var r=n("c3f8"),o=n.n(r);for(var i in r)"default"!==i&&function(t){n.d(e,t,(function(){return r[t]}))}(i);e["default"]=o.a},efe5:function(t,e,n){"use strict";n.r(e);var r=n("7b1a"),o=n("d44b");for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);n("2712");var a,s=n("f0c5"),c=Object(s["a"])(o["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=c.exports}},[["62a3","common/runtime","common/vendor"]]]);